{% extends 'base.html' %}

{% block content %}
  <h1>Dashboard</h1>

  <h2>Quick Links</h2>
  {% for employee in employees %}
    {% if employee.is_clocked_in %}
      <a href="{% url 'vms:clock-out' employee.id %}">Clock Out {{ employee }}</a>
    {% else %}
      <a href="{% url 'vms:clock-in' employee.id %}">Clock In {{ employee }}</a>
    {% endif %}
  {% endfor %}

  <h2>Stats</h2>
  <p>You are{% if not clocked_in %} not{% endif %} currently clocked in.</p>
  <p>{{ request.user.name }}, you have worked {{ total_hours }} hour(s).</p>

  <h3>Time Records</h3>
  {% for employee in employees %}
    <h4>{{ employee }}</h4>
    <table style="text-align: center;">
      <thead>
        <tr>
          <th>Start Time</th>
          <th>End Time</th>
          <th>Approved</th>
        </tr>
      </thead>
      <tbody>
        {% for record in employee.time_records.all|dictsortreversed:'time_start' %}
          <tr>
            <td>{{ record.time_start|date:'n/j/Y g:i a' }}</td>
            <td>
              {% if record.time_end %}
                {{ record.time_end|date:'n/j/Y g:i a' }}
              {% else %}
                -
              {% endif %}
            </td>
            <td>{% if record.is_approved %}✔{% else %}✗{% endif %}</td>
          </tr>
        {% endfor %}
      </tbody>
    </table>
  {% endfor %}
{% endblock %}
